<template id="list-options-template">
    <div currentState=""></div>
    <style>
        .hidden {
            display: none;
        }
    </style>
</template>    

<script>  
    (function(document) {
        document.registerElement('view-stack', class extends SlimElement {
            constructor() {
                this._currentState = null;
            }
            _render() {
                for (let child of this.children) {
                    if (child.hasAttribute('in-state')) {
                        if (child.getAttribute('in-state') === this.currentState) {
                            $(child).show()
                        } else {
                            $(child).hide()
                        }
                    }
                }
            }
            get currentState() {
                return this.getAttribute('current-state')
            }
            set currentState(value) {
                if (value !== this.currentState) {
                    this.setAttribute('current-state', value)
                    this._render()
                }
            }
            _onAttributeChanged(attribute, oldValue, newValue) {
                if (attribute === 'current-state') {
                    this._currentState = this.newValue
                    this.dispatchEvent(new Event('change'))
                    this._render()
                }
            }
            _onAdded() {
                this._render()
            }
            _onRemoved() {
                this._render()
            }
            _onCreated() {
                super._onCreated()
            }
        })
    }(document))
</script>