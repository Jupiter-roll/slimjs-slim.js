<script>


    Slim('phonecat-main', class extends SlimBaseElement {

        get template() {
            return `
<input type="text" slim-id="search" />
<select slim-id="order" value="name">
<option value="name">Alphabetical</option>
<option value="age">Newest</option>
</select>
<ul>
    <phone-item slim-repeat="items" model="{PhoneCatModel}"></phone-item>
  </ul>
`
        }


        get items() {
            return this.model.phones.filter( phone => {
                return phone.name.toLowerCase().indexOf(this.search.value.toLowerCase()) >= 0
            }).sort( (a,b) => {
                return a[this.order.value] > b[this.order.value] ? 1 : -1
            })
        }

        onCreated() {
            this.model.onReady = () => {
                this.update()
            }
        }

        afterRender() {
            this.search.onkeyup = () => {
                this.update()
            }

            this.order.onchange = () => {
                this.update()
            }
        }


    })


</script>

<style>

</style>